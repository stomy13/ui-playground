import{aj as P,ak as M,al as B,aa as V,r as u,Y as $,ab as q,$ as C,j as w}from"./index-CxSK0bHK.js";const G=P();function D(n){const{theme:r,name:a,props:i}=n;return!r||!r.components||!r.components[a]||!r.components[a].defaultProps?i:M(r.components[a].defaultProps,i)}function J({props:n,name:r,defaultTheme:a,themeId:i}){let c=B(a);return i&&(c=c[i]||c),D({theme:c,name:r,props:n})}function I(n,r=166){let a;function i(...c){const f=()=>{n.apply(this,c)};clearTimeout(a),a=setTimeout(f,r)}return i.clear=()=>{clearTimeout(a)},i}function z(n){return V(n).defaultView||window}function p(n){return parseInt(n,10)||0}const Y={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Z(n){for(const r in n)return!1;return!0}function E(n){return Z(n)||n.outerHeightStyle===0&&!n.overflowing}const K=u.forwardRef(function(r,a){const{onChange:i,maxRows:c,minRows:f=1,style:b,value:R,...O}=r,{current:W}=u.useRef(R!=null),d=u.useRef(null),j=$(a,d),m=u.useRef(null),S=u.useRef(null),g=u.useCallback(()=>{const t=d.current,e=S.current;if(!t||!e)return;const o=z(t).getComputedStyle(t);if(o.width==="0px")return{outerHeightStyle:0,overflowing:!1};e.style.width=o.width,e.value=t.value||r.placeholder||"x",e.value.slice(-1)===`
`&&(e.value+=" ");const y=o.boxSizing,A=p(o.paddingBottom)+p(o.paddingTop),F=p(o.borderBottomWidth)+p(o.borderTopWidth),H=e.scrollHeight;e.value="x";const v=e.scrollHeight;let l=H;f&&(l=Math.max(Number(f)*v,l)),c&&(l=Math.min(Number(c)*v,l)),l=Math.max(l,v);const L=l+(y==="border-box"?A+F:0),N=Math.abs(l-H)<=1;return{outerHeightStyle:L,overflowing:N}},[c,f,r.placeholder]),T=q(()=>{const t=d.current,e=g();if(!t||!e||E(e))return!1;const s=e.outerHeightStyle;return m.current!=null&&m.current!==s}),h=u.useCallback(()=>{const t=d.current,e=g();if(!t||!e||E(e))return;const s=e.outerHeightStyle;m.current!==s&&(m.current=s,t.style.height=`${s}px`),t.style.overflow=e.overflowing?"hidden":""},[g]),x=u.useRef(-1);C(()=>{const t=I(h),e=d==null?void 0:d.current;if(!e)return;const s=z(e);s.addEventListener("resize",t);let o;return typeof ResizeObserver<"u"&&(o=new ResizeObserver(()=>{T()&&(o.unobserve(e),cancelAnimationFrame(x.current),h(),x.current=requestAnimationFrame(()=>{o.observe(e)}))}),o.observe(e)),()=>{t.clear(),cancelAnimationFrame(x.current),s.removeEventListener("resize",t),o&&o.disconnect()}},[g,h,T]),C(()=>{h()});const k=t=>{W||h();const e=t.target,s=e.value.length,o=e.value.endsWith(`
`),y=e.selectionStart===s;o&&y&&e.setSelectionRange(s,s),i&&i(t)};return w.jsxs(u.Fragment,{children:[w.jsx("textarea",{value:R,onChange:k,ref:j,rows:f,style:b,...O}),w.jsx("textarea",{"aria-hidden":!0,className:r.className,readOnly:!0,ref:S,tabIndex:-1,style:{...Y.shadow,...b,paddingTop:0,paddingBottom:0}})]})});export{K as T,I as d,z as o,G as s,J as u};
